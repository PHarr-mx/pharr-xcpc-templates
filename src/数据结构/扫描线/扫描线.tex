\section{扫描线}

\subsection{求面积并}
给若干个矩形，求面积的并值。 这里通常会对下标进行哈希
\lstinputlisting{数据结构/扫描线/luoguP5490.cpp}

\subsection{二维数点}

单纯的二维数点数点问题，可以只用树状数组就可以维护。

$d(x,y)$表示从$(0,0)$到$(x,y)$中点的数量，因此从左下角$(a,b)$到右上角$(c,d)$中点的数量就可以表示为$d(c,d) - d(c,b-1) - d(a-1,d) + d( a-1,b-1)$ , 这个形式就是普通的二维前缀和。我们把式子稍作变形转换为$d((c,d) - d(c,b-1)) - (d(a-1,d) - d(a-1,b-1))$ 这样的话就可以用扫描线优化掉一维。

\lstinputlisting{数据结构/扫描线/luoguP2163.cpp}
